# Multi-Cloud Cost Monitor - Development Configuration
# Optimized for development and testing environments

clouds:
  aws:
    enabled: true  # AWS credentials are now configured
    region: "us-east-1"

    # Development: Use local AWS CLI profile
    profile: "default"

    cost_explorer:
      granularity: "DAILY"
      metrics: ["BLENDED_COST"]  # AWS requires uppercase with underscores
      group_by: ["SERVICE"]

    thresholds:
      warning: 100.0   # Low thresholds for testing
      critical: 200.0

    icinga:
      check_interval: 3600  # Less frequent checks
      notification_enabled: false  # Disable notifications in dev

  azure:
    enabled: true  # Enable Azure for testing

    # Service principal configuration for management group permissions
    service_principal_object_id: "5f235f9f-960b-44b8-8d96-75953cc48183"

    # Azure Cost Management Export configuration - use pre-exported data for efficiency
    export:
      enabled: true
      storage_account: "demobillingexports"
      export_name: "demo-billing-exports-actual"
      container: "cost-exports"  # Default container name (will be auto-detected)

    # Management group configuration - disabled in favor of exports
    management_groups: ["rhpds-pool-00", "rhpds-pool-01"]
    use_management_groups: false  # Disabled - using exports instead
    query_all_subscriptions: false  # Disabled - using exports instead
    use_exports: true  # Enable export-based cost data retrieval

    thresholds:
      warning: 5000.0   # Higher thresholds for actual enterprise costs
      critical: 10000.0

  gcp:
    enabled: true  # GCP credentials are now configured

    thresholds:
      warning: 100.0
      critical: 200.0

# Development monitoring settings
monitoring:
  thresholds:
    warning: 100.0
    critical: 200.0

  icinga:
    check_interval: 3600
    notification_enabled: false
    performance_data: true
    output_format: "json"  # JSON for easier debugging

  alerts:
    enabled: true
    console_output: true  # Enable console output for dev

    email:
      enabled: false  # Disable email in dev

# Development dashboard - enabled with debug mode
dashboard:
  enabled: true
  host: "0.0.0.0"  # All interfaces - allows access from Windows
  port: 8050
  debug: true  # Enable debug mode
  auto_refresh: true
  refresh_interval: 60  # More frequent updates for dev

  authentication:
    enabled: false  # Disable auth in dev

  ssl:
    enabled: false  # Disable SSL in dev

# Development caching - use disk cache to test file caching
cache:
  enabled: true
  type: "disk"  # Use disk cache to test file caching implementation
  ttl: 3600  # 1 hour cache for testing
  max_size: "100MB"
  directory: "~/.cache/cost-monitor"  # Use home directory cache location

  # Cache TTLs for all providers - matching file cache durations
  aws:
    ttl: 86400  # 24 hours to match AWS file cache
  azure:
    ttl: 86400  # 24 hours to match Azure file cache
  gcp:
    ttl: 86400  # 24 hours to match GCP file cache

# Development logging - verbose output
logging:
  level: "DEBUG"  # Verbose logging for development
  format: "simple"  # Human-readable format
  file: "./logs/cost-monitor-dev.log"
  max_size: "10MB"
  backup_count: 3

# Permissive rate limiting for development
rate_limiting:
  aws:
    calls_per_minute: 200
    retry_attempts: 3
    backoff_factor: 1.5

  azure:
    calls_per_minute: 200
    retry_attempts: 3
    backoff_factor: 1.5

  gcp:
    calls_per_minute: 200
    retry_attempts: 3
    backoff_factor: 1.5

# Development-specific settings
development:
  mock_data: false  # Set to true to use mock data
  debug_api_calls: true  # Log API requests/responses
  skip_auth_validation: false  # Set to true to skip auth checks

  # Test data settings
  test_data:
    enabled: false
    data_file: "./test_data/sample_costs.json"

  # Hot reload for development
  hot_reload: true

# Simplified security for development
security:
  encryption:
    enabled: false  # Disable encryption in dev

  audit:
    enabled: false  # Disable audit logging

  # Allow all networks in dev
  allowed_networks: []

# Health checks enabled for testing
health:
  enabled: true
  port: 8081
  path: "/health"

  checks:
    - name: "cloud_auth"
      enabled: true
    - name: "cache"
      enabled: true

# Disable backup in development
backup:
  enabled: false

# Performance monitoring disabled in dev
performance:
  metrics:
    enabled: false

  profiling:
    enabled: true  # Enable profiling for performance testing
    port: 6060